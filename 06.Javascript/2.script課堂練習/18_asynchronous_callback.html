<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>非同步回調函式的觀念</title>
  </head>
  <body>
    <button class="alertBtn">alert(1)</button>
    <button class="alertBtn">alert(2)</button>
    <button class="alertBtn">alert(3)</button>
    <button class="alertBtn">alert(4)</button>
    <button class="alertBtn">alert(5)</button>
    <button class="alertBtn">alert(6)</button>
    <button class="alertBtn">alert(7)</button>
    <button class="alertBtn">alert(8)</button>
    <button class="alertBtn">alert(9)</button>
    <button class="alertBtn">alert(10)</button>

    <script type="text/javascript">
      // 題目： 請嘗試以下的範例程式碼，回答出現了什麼問題？

      function init() {
        // var btns = document.getElementsByClassName('alertBtn');
        // for (var i = 0; i < btns.length; i++) {
        //   btns[i].addEventListener('click', function () {
        //     alert(i + 1);
        //   });
        // }

        // console.log()看看，最後的i是多少？
        // console.log(i);

        // 解法 1: 額外寫一個函式，將變數i傳入，利用區域變數的特性，將變數i鎖在區域變數作用域上
        // let btns1_1 = document.getElementsByClassName('alertBtn');
        // for (let i = 0; i < btns1_1.length; i++) {
        //   myFnc(i);
        // }

        // function myFnc(i) {
        //   btns1_1[i].addEventListener('click', (e) => {
        //     let text = e.srcElement.innerText;
        //     alert(i + 1);
        //   });
        // }

        // 解法 1 的另外一種寫法 (進階)
        let btns1_2 = document.getElementsByClassName('alertBtn');
        for (let i = 0; i < btns1_2.length; i++) {
          btns1_2[i].addEventListener('click', function () {
            let text = this.innerText;
            alert(text);
          });
        }

        // 解法 2: 利用this

        // 解法 3: 利用event.target
        // let btns2 = document.getElementsByClassName('alertBtn');
        // for (let i = 0; i < btns2.length; i++) {
        //   btns2[i].addEventListener('click', (e) => {
        //     let text = e.srcElement.innerText;
        //     alert(text);
        //   });
        // }
      }

      window.onload = init;
    </script>
  </body>
</html>
