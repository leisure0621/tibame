<h1 id="top">目錄</h1>

- [1. 客戶端提取 (Client Pull)](#s1)
- [2. 使用 res.setHeader("Refresh", "10") 刷新畫面](#s2)
- [3. 使用 res.setHeader("Refresh", "10; URL=http://...") 刷新並跳轉頁面](#s3)

---

# <a id='s1' class='md-title' href='#top'>1. 客戶端提取 (Client Pull)</a>

- **<span style='color:blue;'>目的:</span>** 客戶端負責提取 (pull) 下一網頁
- **<span style='color:blue;'>模式說明:</span>** 客戶端提取 (Client pull)，功能類似重導 (Redirect)，主要差異在於瀏覽器會先顯示第一個網頁，並等待一段伺服器所指定的時間，然後才擷取顯示下一網頁，故稱知客戶端提取 (Client Pull)
- **<span style='color:blue;'>實作方法:</span>**
  - **<span style='color:red;'>res</span>.<span style='color:blue;'>setHeader(</span>"<span style='color:#d23200;'>Refresh</span>", "<span style='color:#d23200;'>3</span>"<span style='color:blue;'>)</span>**
    - 每三秒鐘刷新一次頁面
  - **<span style='color:red;'>res</span>.<span style='color:blue;'>setHeader(</span>"<span style='color:#d23200;'>Refresh</span>", "<span style='color:#d23200;'>3;URL=http://......</span>"<span style='color:blue;'>)</span>**
    - 三秒鐘後將頁面導至指定網頁
- **<span style='color:blue;'>比較 HTML:</span>**

```html
<head>
  <meta http-equiv="Refresh" content="3" />
</head>
```

# <a id='s2' class='md-title' href='#top'>2. 使用 res.setHeader("Refresh", "10") 刷新畫面</a>

- 可另開此連結 [參考此檔](./doc/WebApp_ch05.war)

```cs
範例檔案: "/WebApp_ch05/src/servlet_examples/ClientPull.java"
```

```java
package servlet_examples;

import java.io.*;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class ClientPull extends HttpServlet {
  private static final long serialVersionUID = 1L;

  public void doGet(HttpServletRequest req, HttpServletResponse res)
                              throws ServletException, IOException {
    res.setContentType("text/plain");
    PrintWriter out = res.getWriter();

    // 每10秒鐘刷新一次頁面
    res.setHeader("Refresh", "10");
    // 刷信後印出頁面上的日期
    out.println(new Date());
  }
}
```

# <a id='s3' class='md-title' href='#top'>3. 使用 res.setHeader("Refresh", "10; URL=http://...") 刷新並跳轉頁面</a>

```java
package servlet_examples;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class ClientPullMove extends HttpServlet {
  private static final long serialVersionUID = 1L;

  static final String NEW_HOST = "https://tw.yahoo.com";

  public void doGet(HttpServletRequest req, HttpServletResponse res)
                              throws ServletException, IOException {
    res.setContentType("text/html");
    PrintWriter out = res.getWriter();
    // getRequestURI() : 專案名稱 + 本網頁的 ClientPullMove 的一個動態名稱
    String newLocation = NEW_HOST + req.getRequestURI();

    res.setHeader("Refresh", "10; URL=" + newLocation);

    out.println("The requested URI has been moved to a different host.<BR>");
    out.println("Its new location is " + newLocation + "<BR>");
    out.println("Your browser will take you there in 10 seconds.");
  }
}
```
