<h1 id="top">目錄</h1>

- [1. 取得 Servlet 自身的資訊](#s1)
- [2. Servlet 介面 與 ServletConfig 介面](#s2)
- [3. 取出多個初始參數範例](#s3)

---

# <a id='s1' class='md-title' href='#top'>1. 取得 Servlet 自身的資訊</a>

- **取得 Servlet 初使參數**
  - **String <span style='color:blue;'>getInitParameter(String name)</span>**
    - 取得 Servlet 初始參數的『 **值** 』
  - **Enumeration <span style='color:blue;'>getInitParameterNames()</span>**
    - 列舉 Servlet 初始參數的『 **名稱** 』
  - getInitParameterNames() 是為了取得出使畫參數名稱，借由名稱取得參數的值

> 註: 須配合 Web.xml ( 參見 <u>Init Parameter 初始參數</u> 及 <u>機器資訊</u> 的程式片段 )

- **取得 Servlet 名稱、環境 (Context)**
  - **String <span style='color:blue;'>getServletName()</span>**
    - 取得『 **Servlet 名稱** 』
  - **String <span style='color:blue;'>getServletContext()</span>** <bikao>★</bikao>
    - 取得『 **Servlet 環境** 』(Servlet Context)

> 以上均屬 ServletConfig 介面(由 GenericServlet 類別實作) 之 method，故程式內直接使用

- 程式片段 (取得 web.xml 所提供的所有<u> 初始參數 </u>名稱、值)

```java
java.util.Enumeration enum = getInitParameterNames();
while(enum.hasMoreElements()){
  String name = (String) enum.nextElement();
  out.println(name + ":" + getInitParameter(name));
}
```

# <a id='s2' class='md-title' href='#top'>2. Servlet 介面 與 ServletConfig 介面</a>

- [Servlet](https://tomcat.apache.org/tomcat-8.0-doc/servletapi/index.html) : 生命周期介面，為了控制生命周期
  - 總共有五個方法，重要的為以下三種
    - 初始化用的 init()
    - 服務客人的 service()
    - 卸載使用的 destroy()
- [ServletConfig](https://tomcat.apache.org/tomcat-8.0-doc/servletapi/index.html): 組態資訊介面，為了取得外部資源
  - 總共有四個方法，因為四個方法都由父介面(GenericServlet)繼承下來的，所以直接叫用就好

# <a id='s3' class='md-title' href='#top'>3. 取出多個初始參數範例</a>

- [匯入範例檔案](./doc/webapp.zip?target=_blank)，或照以下方式

- 在在 **WEB-INF/web.xml** 設定初始化參數

```xml
<!-- 多個初始參數的練習 -->
<servlet>
  <servlet-name>InitSnoop</servlet-name>
  <servlet-class>servlet_examples.InitSnoop</servlet-class>
  <init-param>
    <param-name>initial1</param-name>
    <param-value>1000</param-value>
  </init-param>
  <init-param>
    <param-name>initial2</param-name>
    <param-value>2000</param-value>
  </init-param>
  <init-param>
    <param-name>initial3</param-name>
    <param-value>3000</param-value>
  </init-param>
</servlet>
<servlet-mapping>
  <servlet-name>InitSnoop</servlet-name>
  <url-pattern>/InitSnoop</url-pattern>
</servlet-mapping>
```

- 設定測試檔案

```java
package servlet_examples;

import java.io.*;
import java.util.*;
import javax.servlet.*;

public class InitSnoop extends GenericServlet {
  private static final long serialVersionUID = 1L;

  public void service(ServletRequest req, ServletResponse res)
                            throws ServletException, IOException {
    res.setContentType("text/plain");
    PrintWriter out = res.getWriter();

    out.println("Init Parameters:");
    // Map 類，所以取出的資料為無序列表
    Enumeration en = getInitParameterNames();
    while (en.hasMoreElements()) {
      String name = (String) en.nextElement();
      out.println(name + ": " + getInitParameter(name));
    }
  }
}
```

- 執行後結果

```cs
Init Parameters:
initial1: 1000
initial3: 3000
initial2: 2000
```
