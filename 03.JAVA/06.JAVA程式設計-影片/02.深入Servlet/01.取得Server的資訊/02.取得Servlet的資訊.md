<h1 id="top">目錄</h1>

- [1. 取得 Server 機器資訊](#s1)
- [2. getServletContext 程式碼片段](#s2)

---

# <a id='s1' class='md-title' href='#top'>1. 取得 Server 機器資訊</a>

- **取得 Server 機器資訊**
  - **String** **<span style='color:red;'>req</span>**.**<span style='color:blue;'>getServerName()</span>**
    - 取得請求 (request) 時的，『伺服器<u> 名稱 </u>』
  - **int** **<span style='color:red;'>req</span>**.**<span style='color:blue;'>getServerPort()</span>**
  - 取得請求 (request) 時的『伺服器<u> 通訊埠號 </u> server port』

> 註 1 : 以上 req 指 ServletRequest 型別物件
> 註 2 : req 即請求的物件的一個方法

- **<span style='color:red;'>ServletContext (Servlet 環境)</span>** 之屬性 (Attribute) method
  - **void <span style='color:red;'>context.</span><span style='color:blue;'>setAttribute(String name, Object value)</span>**
    - 將指定的物件存入 ServletContext 中
  - **Object <span style='color:red;'>context.</span><span style='color:blue;'>getAttribute(String name)</span>**
    - 從 ServletContext 中取出物件
  - **void <span style='color:red;'>context.</span><span style='color:blue;'>removeAttribute(String name)</span>**
    - 從 ServletContext 中移除物件
  - **Enumeration <span style='color:red;'>context.</span><span style='color:blue;'>getAttributeNames()</span>**
    - 將目前 ServletContext 中的所有屬性名稱以 Enumeration 型態傳回

> 註 1 : 將來 <span style='color:red;'>context.</span> 的部分會變成 session 即使用者專屬的資料，或變成 request 物件就是 servlet 協同在一起的幾個人能看的到
> 註 2 : "<span style='color:#d23200;'>javax.servlet.context.tempdir</span>" 是伺服器被強制規定一定要有的屬性 (Attribute) 名稱，此方法也可放入 context.getAttribute(javax.servlet.context.tempdir) 取出目錄的暫時目錄區 (work)，將來在跑 jsp 就會使用到此位置

# <a id='s2' class='md-title' href='#top'>2. getServletContext 程式碼片段</a>

- **程式碼片段** : 取得<u> Servlet 環境 </u>擁有之所有屬性名稱、值

```java
ServletContext context = getServletContext();
Enumeration en = context.getAttributeNames();
while(en.hasMoreElements()){
  String name = (String) en.nextElement();
  out.println(name + ":" + context.getAttribute(name));
}
```

- **執行結果**: javax.servlet.context.tempdir 的位置就是 <u>暫時目錄區</u>
  - **目的**:
    - work 是項目檔案執行後產生的<u>暫時目錄區</u>，即 JSP 轉成 servlet 程式時存放位置
    - 於 servlet 程式 JSP 除錯用(有些時候，可以查看 jsp 執行後生成之 \*\_jsp.java 查看 java 結構)
  - **刪除時機**:
    - 系統時間不對
    - 系統時間對，但伺服器一直再跑舊程式
  - **刪除方法**:
    - 手動進入 Tomcat 的目錄刪除 work
    - 使用 eclipse 刪除 work 中項目

```cs
req.getServerName(): localhost
req.getServerPort(): 8082
context.getAttributeNames():
  context.getAttribute("javax.servlet.context.tempdir"): D:\02_project\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina\localhost\WebApp_ch04
  context.getAttribute("org.apache.catalina.resources"): org.apache.catalina.webresources.StandardRoot@57a76dcd
  context.getAttribute("org.apache.catalina.webappVersion"):
  context.getAttribute("org.apache.tomcat.InstanceManager"): org.apache.catalina.core.DefaultInstanceManager@3f6b7e2d
  context.getAttribute("org.apache.catalina.jsp_classpath"): /D:/02_project/apache-tomcat-8.5.57/lib/;/D:/02_project/apache-tomcat-8.5.57/lib/annotations-api.jar;/D:/02_project/apache-tomcat-8.5.57/lib/catalina-ant.jar;/D:/02_project/apache-tomcat-8.5.57/lib/catalina-ha.jar;/D:/02_project/apache-tomcat-8.5.57/lib/catalina-storeconfig.jar;/D:/02_project/apache-tomcat-8.5.57/lib/catalina-tribes.jar;/D:/02_project/apache-tomcat-8.5.57/lib/catalina.jar;/D:/02_project/apache-tomcat-8.5.57/lib/ecj-4.6.3.jar;/D:/02_project/apache-tomcat-8.5.57/lib/el-api.jar;/D:/02_project/apache-tomcat-8.5.57/lib/jasper-el.jar;/D:/02_project/apache-tomcat-8.5.57/lib/jasper.jar;/D:/02_project/apache-tomcat-8.5.57/lib/jaspic-api.jar;/D:/02_project/apache-tomcat-8.5.57/lib/jsp-api.jar;/D:/02_project/apache-tomcat-8.5.57/lib/ojdbc6.jar;/D:/02_project/apache-tomcat-8.5.57/lib/servlet-api.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-api.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-coyote.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-dbcp.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-i18n-de.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-i18n-es.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-i18n-fr.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-i18n-ja.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-i18n-ko.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-i18n-ru.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-i18n-zh-CN.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-jdbc.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-jni.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-util-scan.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-util.jar;/D:/02_project/apache-tomcat-8.5.57/lib/tomcat-websocket.jar;/D:/02_project/apache-tomcat-8.5.57/lib/websocket-api.jar;/D:/02_project/apache-tomcat-8.5.57/bin/bootstrap.jar;/D:/02_project/apache-tomcat-8.5.57/bin/tomcat-juli.jar;/D:/JDK/jre1.8.0_231/lib/ext/access-bridge-64.jar;/D:/JDK/jre1.8.0_231/lib/ext/cldrdata.jar;/D:/JDK/jre1.8.0_231/lib/ext/dnsns.jar;/D:/JDK/jre1.8.0_231/lib/ext/jaccess.jar;/D:/JDK/jre1.8.0_231/lib/ext/jfxrt.jar;/D:/JDK/jre1.8.0_231/lib/ext/localedata.jar;/D:/JDK/jre1.8.0_231/lib/ext/nashorn.jar;/D:/JDK/jre1.8.0_231/lib/ext/sunec.jar;/D:/JDK/jre1.8.0_231/lib/ext/sunjce_provider.jar;/D:/JDK/jre1.8.0_231/lib/ext/sunmscapi.jar;/D:/JDK/jre1.8.0_231/lib/ext/sunpkcs11.jar;/D:/JDK/jre1.8.0_231/lib/ext/zipfs.jar
  context.getAttribute("javax.websocket.server.ServerContainer"): org.apache.tomcat.websocket.server.WsServerContainer@6a410e3
  context.getAttribute("org.apache.jasper.compiler.TldCache"): org.apache.jasper.compiler.TldCache@2c3488f7
  context.getAttribute("org.apache.tomcat.JarScanner"): org.apache.tomcat.util.scan.StandardJarScanner@401151b9
```

> 可參照 : WebApp_ch04/src/servlet_examples/ServerSnoop.java
> 需匯入 : WebApp_ch04.war
