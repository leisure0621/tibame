<h1 id="top">目錄</h1>

- [1. Transaction 管理](#s1)

---

# <a id='s1' class='md-title' href='#top'>1. Transaction 管理</a>

- **Transaction 管理之<span style='color:blue;'>目的</span>**
  - JDBC 的 Transaction (交易，異動) 管理是透過 **<span style='color:red;'>Connection</span>** 物件來進行的，須搭配使預的 3 個 methods 如下所示

```java
try {
  // false: 關閉字動交付(commit)功能
  // true: 為預設值
  con.setAutoCommit(false);
  // 需考慮交易(transaction)的數個sql指令(如有任一指令失敗時，其他指令皆不可執行)
  ...SQL...
  ...SQL...
  ...SQL...
  con.commit();
} catch (SQLException e1) {
  ...
  try {
    con.rollback();
  } catch (SQLException e2) { ... }
  ...
}
```

- **Transaction 管理之<span style='color:blue;'>實作</span>**
  - **實做方案**
    - 改宣告 Connection 物件為區域變數 (local variable)
      - 改宣告 Cnnection 物件為區域變數(local variable)，連同管理 Transaction 的 3 個 methods 皆置於 doGet() 或 doPost() 內
        - **範例:** **DBEmpLookup3\_<span style='color:red;'>DeleHander</span>.java** (處裡 Transaction 的 Servlet)
        - **注意:** 此雖然<span style='color:red;'>解決</span>使用 Transaction 時資料庫連線不能共用的問題，但也因此<span style='color:red;'>犧牲了</span>重覆使用資料庫連線的功能
  - **其他方案**
    - 也可讓 Servlet 自己實作 **<span style='color:blue;'>Session Tracking</span>**，利用 HttpSession 物件儲存每位使用者自己的資料庫連線，不過這種做法會有其他連線數負荷不足的問題
    - 為兼顧所有優缺點，**<span style='color:blue;'>Connection pool(連線池)</span>**，應是最佳解決方案。然而若無協力廠商提供能支援類別協助，程式將變成複雜無比，難以維護
