<h1 id="top">目錄</h1>

- [1. 以 Servlet 產生網頁](#s1)
- [2. HelloWorld doGet() 範例](#s2)
- [3. HelloWorld doGet() 與 doPost() 皆可的範例](#s3)

---

# <a id='s1' class='md-title' href='#top'>1. 以 Servlet 產生網頁</a>

- **由最基本類型的 HTTP servlet，即可產生一個完全由 HTML 構成的網頁**
- **一個 HTTP servlet 應繼承自 <span style="color:red;">HttpServlet</span> 類別，並 覆寫(Override) 其 <span style="color:blue;">doGet()</span> 或 <span style="color:blue;">doPost()</span> method**
- **當 Web server 收到送往此 servlet 的 request (請求) 時**
  - 如為 <u>Get request</u>，伺服器會 **自動呼叫** 其 <u>doGet()</u> 方法
  - 如為 <u>Post request</u>，伺服器會 **自動呼叫** 其 <u>doPost()</u> 方法
  - 並傳入一個 **<span style="color:blue;">HttpServletRequest</span>** 和一個 **<span style="color:blue;">HttpServletResponse</span>** 介面形態的物件
- **從父類別 HttpServlet 類別繼承而來的 doGet() 或 doPost() 方法，其預設值都是傳回錯誤訊息，讓 client 端知道被其請求的 URL，並不支援其所指定的方法** (<u> 即 get 請求發送，但後端是 post 接收的這種錯誤 </u>)
  - **<span style="color:blue;">『 405，Method Not Allowed 』 之 Status Code</span>**
- 以下為假設主程式碼已置於 **<span style="color:blue;">doPost()</span>** 而將 **<span style='color:red;'>get</span>** request **<span style='color:red;'>轉交</span>** **<span style='color:blue;'>doPost()</span>** (同理，反之也可)

```java
public void doGet(HttpServletRequest req, HttpServletResponse res)
                          throws ServletException, IOException {
  doPost(req, res);
}
```

# <a id='s2' class='md-title' href='#top'>2. HelloWorld doGet() 範例</a>

- PrintWriter 專門用於 Unicode 的字元處理 (即文字處理)，可查閱 [Reader / Writer 資料流](./../../../03.JAVA套件與進階/15.資料輸入與輸出/15-2.資料流類別.md#s8)
  - 在此範例中，接到 HttpServletResponse 並寫出到瀏覽器頁面上，若輸出文件的話就是
- 如果將現在範例中的請求由<u> doGet() 改成 doPost() </u>，則重新運行此頁面的話會跳出<u> 405 </u>的錯誤，因為如果使用<u> 瀏覽器直接輸入 URL 的方式 </u>是變成一個<u> get 請求 </u>進來，<u> 而程式只能接收 post 請求 </u>就會出錯

```java
// myWebApp1/src/servlet_examples/HelloWorld.java

package servlet_examples;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet {
  private static final long serialVersionUID = 1L;

  public void doGet(HttpServletRequest req, HttpServletResponse res)
                           throws ServletException, IOException {

    // 1. 設定 Response Content Type(MIME) 標頭，編碼相關
    res.setContentType("text/html; charset=UTF-8");
    // 2. 取得 OutputStream (Write/OutputStream)
    PrintWriter out = res.getWriter();
    // 3. 由 OutputStream 輸出 Content (內容)
    out.println("<HTML>");
    out.println("<HEAD><TITLE>Hello World</TITLE></HEAD>");
    out.println("<BODY>");
    out.println("<BIG>Hello World , 世界你好 !</BIG>");
    out.println("</BODY></HTML>");
  }
}
```

# <a id='s3' class='md-title' href='#top'>3. HelloWorld doGet() 與 doPost() 皆可的範例</a>

- 一般來說只會使用 doGet() 或 doPost()，但有特殊情形是不曉得對方會使用 get 還是 post 就可這樣寫

```java
package servlet_examples;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet {
  private static final long serialVersionUID = 1L;

  public void doGet(HttpServletRequest req, HttpServletResponse res)
                          throws ServletException, IOException {

    doPost(req, res);
  }

  public void doPost(HttpServletRequest req, HttpServletResponse res)
            throws ServletException, IOException {

    res.setContentType("text/html; charset=UTF-8");
    PrintWriter out = res.getWriter();

    out.println("<HTML>");
    out.println("<HEAD><TITLE>Hello World</TITLE></HEAD>");
    out.println("<BODY>");
    out.println("<BIG>Hello World , 世界你好 !</BIG>");
    out.println("</BODY></HTML>");
  }
}
```

---

參考鏈接:

- [javaweb 学习总结(七)——HttpServletResponse 对象(一)](https://www.cnblogs.com/xdp-gacl/p/3789624.html)
