<h1 id="top">目錄</h1>

- [1. 佈署描述檔 web.xml](#s1)

---

# <a id='s1' class='md-title' href='#top'>1. 佈署描述檔 web.xml</a>

- **佈署描述檔 <span style='color:blue;'>WEB-INF</span>/<span style='color:red;'>web.xml</span> (deployment descriptor)**

  - <span style='color:red;'>當伺服器啟動時，伺服器就會預先讀取每一個 Web App 的 web.xml 檔，用來提供該 Web App 的資訊給伺服器</span>
  - 此檔案包含他所屬的 Web App 之組態資訊，可讓你完全控制所屬 Web App 的行為，控制了 servlet 的 **<span style='color:blue;'>註冊、URL 對應、歡迎檔、錯誤檔</span>**...等
  - Servlet 2.4 開始 (Tomcat 5.x)，web.xml DTD 改用 XML Schema，元素可不依順序設定，並有更強的驗證機制

- **佈署描述檔的開始**

  - web.xml 第一行宣告 XML 版本...等: `<?xml version="1.0" encoding="UTF-8"?>`
  - 第二行指定此檔案所用的 DTD 或 XMLSchema 檔，所有的部屬描述檔都以這兩行 **或類似的宣告** 作為開始 `<!DOCTYPE web-app PUBLIC "-//Sun Microsystems..." "http://java...">`
  - 其餘在 `<web-app>` 和 `</web-app>`之間的文字為檔案主體，用來提供該 **<span style='color:blue;'>Web app</span>** 的資訊給伺服器

- **經由 web.xml 檔案的設定，將有多種方式可以執行 Servlet 程式**

  - 同一個 Servlet 程式可以有多個註冊名稱(**servlet-name**)，每一個註冊名稱會各自搭配一個 Servlet 實體(**servlet-class**，放置方式為"**{packageName}.{className}**")

- **註冊方法 1**: 明確對應 (常用)
  - **明確對應方式**:
    http://{主機:port}/{Servlet Context Path}**/hello.html**
  - 以 URL mapping 執行，mapping 使用前面註冊名稱的實體，不會產生一個實體
    - **{Servlet Context Path}**: webapps/**{projectName}**，projectName 如: IBM...等自訂項目名稱，<u>{Servlet Context Path} 即 {projectName}</u>

```xml
<web-app>
  <servlet>
    <servlet-name>hi</servlet-name>
    <servlet-class>HelloWorld</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>hi</servlet-name>
    <url-pattern>/hello.html</url-pattern>
  </servlet-mapping>
</web-app>
```

- **註冊方法 2**: 前置路徑對應
  - **前置路徑對應方式**: http://{主機:port}/{Servlet Context Path}**/hello.html**/**xxx**

```xml
<servlet-mapping>
  <servlet-name>hi</servlet-name>
  <url-pattern>/hello.html/*</url-pattern>
</servlet-mapping>
```

- **註冊方法 3**: 延伸檔名對應
  - **延伸檔名對應**: http://{主機:port}/{Servlet Context Path}**/hello.html**/xx/yy/zzz.**mm**

```xml
<servlet-mapping>
  <servlet-name>hi</servlet-name>
  <url-pattern>*.mm</url-pattern>
</servlet-mapping>
```

---

參考鏈接:

- [Java Web 回顾总结(四) -URL 映射配置 - web.xml](https://blog.csdn.net/lendq/article/details/79528236)
