<h1 id="top">目錄</h1>

- [1. Load on Startup (啟動時載入)](#s1)
- [2. init() 測試](#s2)

---

# <a id='s1' class='md-title' href='#top'>1. Load on Startup (啟動時載入)</a>

- **Load on Startup (啟動時載入)**
  - 可經由設定 Servlet 的 web.xml 檔案，讓 **<span style='color:blue;'>伺服器在啟動時就自動載入 Servlet，並呼叫其 init() 方法</span>**
  - **設定**: 在 `<servlet>...</servlet>` 項目內加入 `<load-on-startup/>` 標籤
    - **數字叫小的先載入**
      - `<load-on-startup>10</load-on-startup>` 先載入
      - `<load-on-startup>20</load-on-startup>` 後載入
    - 如下設定後，用 <u>MyCounter</u> 註冊名稱的 Servlet 實體會被自動載入

```xml
<servlet>
  <servlet-name>MyCounter</servlet-name>
  <servlet-class>ch03.MyCounter</servlet-class>
  <load-on-startup>一個正整數</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>MyCounter</servlet-name>
  <url-pattern>/MyCounter1</url-pattern>
</servlet-mapping>
```

# <a id='s2' class='md-title' href='#top'>2. init() 測試</a>

- 撰寫 java
  - init() 中的內容僅在第一次執行時執行

```java
package servlet_examples;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet {
  private static final long serialVersionUID = 1L;

  int count = 0;

  public void init() throws ServletException {
    System.out.println("Test from init...");
  }

  public void doGet(HttpServletRequest req, HttpServletResponse res)
                          throws ServletException, IOException {

    res.setContentType("text/html; charset=UTF-8");
    PrintWriter out = res.getWriter();

    out.println("<HTML>");
    out.println("<HEAD><TITLE>Hello World</TITLE></HEAD>");
    out.println("<BODY>");
    out.println("<BIG>Hello World World , 世界你好 !</BIG>"+ (count++));
    out.println("</BODY></HTML>");
  }
}
```

- console 畫面
  - init() 只在載入時執行，故頁面不管執行幾次都只會在此顯示一次資料

```cs
七月 22, 2020 1:10:28 上午 org.apache.catalina.startup.Catalina start
資訊: Server startup in 790 ms
Test from init...
```

- 註
  - 若設定重載入，則除了第一次執行時會執行 init()，重載入時也會在執行一次
