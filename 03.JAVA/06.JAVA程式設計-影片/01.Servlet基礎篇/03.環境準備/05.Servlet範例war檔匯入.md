<h1 id="top">目錄</h1>

- [1. 什麼是 WAR?](#s1)
- [2. 使用 UltraEdit-32 建立 war 檔](#s2)
- [3. 使用 CMD 環境建立 war](#s3)
- [4. Tomcat 啟用時匯入 war](#s4)
- [5. 使用 Eclipse 匯出與匯入 war](#s5)
- [6. 總結](#s6)

---

# <a id='s1' class='md-title' href='#top'>1. 什麼是 WAR?</a>

- **網站備存檔 .war (Web Application Archive)**
  - 若要將系統佈署到其它地方，我們必須要將它集中到一個稱為 Web Archive (.war) 的檔案中
- **何謂網站備存檔 .war ?**
  - 直到目前為止我們都在描述 Web App 的結構，若要將系統佈署到其他地方，我們**必須**要將它集中到一個稱為 Web Archive (.war) 的檔案中
  - 此檔案跟 .jar 沒什麼不同，只是延伸附檔名為 .war，其內部結構同樣從 Web App 的跟目錄開始。可使用 jdk 的 **<span style="color: red;">jar.exe</span>** 命令建立此 .war 檔

# <a id='s2' class='md-title' href='#top'>2. 使用 UltraEdit-32 建立 war 檔</a>

- **清除不必要檔案**
  - 刪除 `*.bak` 與 `*.bak.*`
- **創建打包工具**
  - <u>進階</u> > <u>DOS 指令</u> > <u>勾選 "顯示 DOS 視窗"</u>
    - 指令: `jar`
    - 工作目錄: `%p`
  - <u>進階</u> > <u>DOS 指令</u>
    - **工作目錄下生成 war**
    - 指令: `jar cvf IBM.war *`
    - 工作目錄: `C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\IBM_9`

# <a id='s3' class='md-title' href='#top'>3. 使用 CMD 環境建立 war</a>

- **建立 war 檔**
  - 將於所在目錄中得到 IBM.war 檔
  - 將 IBM.war 置入 <u>{serve_root}/webapps</u> 目錄下
  - 於 server (如 Tomcat) 重新啟動後，IBM.war 將自動被解壓成入下 <u>{serve_root}/webapps/IBM</u>

```cs
X:IBM> jar cvf IBM.war *
```

- **命令參數說明**
  - **<span style="color: red;">jar 參數選項</span>** 簡述
    - **<span style="color: red;">c</span>** : 建立新的壓縮歸檔
    - **<span style="color: red;">v</span>** : 在標準輸出中產生詳細輸出
    - **<span style="color: red;">f</span>** : 指定歸檔檔案名稱 (IBM.war)
    - **<span style="color: red;">\*</span>** : 壓縮所在目錄內的所有檔案

<table>
<tr>	<td>-c</td>	<td>建立新的歸檔</td>	</tr>
<tr>	<td>-t</td>	<td>列出歸檔的目錄</td>	</tr>
<tr>	<td>-x</td>	<td>從歸檔中擷取指定(或所有)檔案</td>	</tr>
<tr>	<td>-u</td>	<td>更新現有歸檔</td>	</tr>
<tr>	<td>-v</td>	<td>在標準輸出中產生詳細輸出</td>	</tr>
<tr>	<td>-f</td>	<td>指定歸檔檔案名稱</td>	</tr>
<tr>	<td>-m</td>	<td>包含指定資訊清單中的資訊清單資訊</td>	</tr>
<tr>	<td>-n</td>	<td>在建立新規檔之後執行 Pack200 正規化</td>	</tr>
<tr>	<td>-e</td>	<td>位已隨附於可執行 jar 檔案中的獨立應用程式指定應用程式進入點</td>	</tr>
<tr>	<td>-0</td>	<td>僅留存; 不使用ZIP壓縮方式</td>	</tr>
<tr>	<td>-P</td>	<td>保留檔案名稱前面的 '/'(絕對路徑) 和 ".." (上層目錄) 元件</td>	</tr>
<tr>	<td>-M</td>	<td>不為項目建立資訊清單檔案</td>	</tr>
</table>

# <a id='s4' class='md-title' href='#top'>4. Tomcat 啟用時匯入 war</a>

- **匯入步驟**
  - 將 war 放入 <u>**apache-tomcat-9.0.37\webapps**</u> 中 > <u>startup.bat</u> > <u>startup.bat</u> > <u>localhost:8082</u>
- **匯入後注意**
  - 執行完匯入步驟後 war 就會被解壓在 <u>apache-tomcat-9.0.37\work\Catalina\localhost</u> 與 <u>apache-tomcat-9.0.37\webapps</u> 中
  - 若 Tomcat 沒 <u>shutdown.bat</u> 就將 war 刪除，則再重新訪問 <u>localhost:8082</u> 時該 war 項目也會同時被刪除

# <a id='s5' class='md-title' href='#top'>5. 使用 Eclipse 匯出與匯入 war</a>

- 可參考 [Eclipse 相關設定](./06.Eclipse相關設定.md) 中操作
- 此方法也是**推薦用法**

# <a id='s6' class='md-title' href='#top'>6. 總結</a>

- **WAR 是網站備存檔，即 backup 檔，可包含原始檔**
- **匯入匯出工具**
  - UltraEdit-32 、 Eclipse 、 CMD 、 Tomcat 都可匯入 WAR
  - UltraEdit-32 、 Eclipse 、 CMD 都可匯出 WAR
  - **但最推薦的方法還是使用 Eclipse**

---

參考鏈接:

- [java ： java -jar,java -cp,jar cvf 命令详解](https://blog.csdn.net/z425955498/article/details/78872288)
