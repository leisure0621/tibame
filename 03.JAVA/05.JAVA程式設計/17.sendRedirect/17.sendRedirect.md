<h1 id="top">目錄</h1>

<ul>
<li><a href='#s1'>1. Forwded、 forwded.jsp、 forwding.jsp 練習</a></li>
<li><a href='#s2'>2. 測試資料庫資料讀取</a></li>
<li><a href='#s3'>3. Java Bean 說明</a></li>
<li><a href='#s4'>4. Java Bean 練習</a></li></ul><hr>

# <a id='s1' class='md-title' href='#top'>1. Forwded、 forwded.jsp、 forwding.jsp 練習</a>

- 測試程式準備

```cs
forwarding.jsp: "C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\ForwardRedirect\forwarding.jsp"
forwarded.jsp:  "C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\ForwardRedirect\forwarded.jsp"
Forward.java:   "C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\ForwardRedirect\WEB-INF\classes\Forward.java"
```

- 編譯並測試可連到 **forwarded.jsp** 頁面

```java
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class Forward extends HttpServlet {


  public void doGet(HttpServletRequest req, HttpServletResponse res)
          throws ServletException, IOException {

    res.setContentType("text/html; charset=Big5");
    PrintWriter out = res.getWriter();

    out.println("有執行 , 但看不到 , 因buffer被清掉");
    req.setAttribute("option", "forward");

    RequestDispatcher dispatcher = req.getRequestDispatcher("/forwarded.jsp");

    dispatcher.forward(req, res);
    out.println("未執行");

  }
}
```

- 將範例圖片放入

```cs
圖片位置: "C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\IBM_9\images"
放入位置: "C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\ForwardRedirect\images"
```

- 貼入完整連結的測試

  此時沒有問題是因為，圖片與執行的程式是在**同個目錄下**

```html
<img src="http://localhost:8081/ForwardRedirect/images/tomcat.gif" />
<img src="images/tomcat.gif" />
```

- forwarded 路徑解法
  - 方法 1: 危險，不能這樣做，容易出現路徑錯誤
  - 方法 2: 只是因為檔案全是同目錄，所以才沒出錯
  - 方法 3: /ForwardRedirect 添加專案路徑，但不好的原因是因為路徑變換就會錯誤
  - 方法 4: `request.getContextPath()` 動態**專案路徑** (推薦)

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>

<html>
  <head>
    <title>forwarded.jsp</title>
  </head>
  <body bgcolor="orange">
    我是 forwarded.jsp
    <br />
    Hello!
    <br />
    <% out.println("name0= "+request.getParameter("name0"));%>
    <br />
    <% out.println("name1= "+request.getAttribute("name1"));%>
    <br />
    <% out.println("name2= "+request.getAttribute("name2"));%>

    <p>方法1: <img src="images/tomcat.gif" /></p>
    <p>
      方法2:
      <img src="http://localhost:8081/ForwardRedirect/images/tomcat.gif" />
    </p>
    <p>方法3: <img src="/ForwardRedirect/images/tomcat.gif" /></p>
    <p>方法4: <img src="<%= request.getContextPath()%>/images/tomcat.gif" /></p>
  </body>
</html>
```

# <a id='s2' class='md-title' href='#top'>2. 測試資料庫資料讀取</a>

- 檔案準備

```cs
被複製: "C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\IBM_9\select_page_Basic.jsp"
複製:   "C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\ForwardRedirect\select_page_Basic.jsp"
```

- 測試路徑

```cs
"http://localhost:8081/ForwardRedirect/select_page_Basic.jsp"
```

- 錯誤示範

  jsp:include page 不能放完整路徑，是錯的
  錯誤: 畫面仍有部分資料

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>

<html>
  <head>
    <title>including.jsp</title>
  </head>
  <body bgcolor="lightblue">
    <% out.println("有執行, 有看到");%> <% request.setAttribute("name1" ,
    "peter1") ; %> <%--有執行--%> <% out.println("有執行, 有看到");%>

    <jsp:include
      page="http://localhost:8081/ForwardRedirect/select_page_Basic.jsp"
      flush="true"
    >
      <jsp:param name="name0" value="peter0" />
    </jsp:include>

    <% out.println("有執行, 有看到");%> <% request.setAttribute("name2" ,
    "peter2") ; %> <%--有執行 , 但included.jsp未取到 , why?--%> <%
    out.println("有執行, 有看到");%>
  </body>
</html>
```

- 正確示範

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>

<html>
  <head>
    <title>including.jsp</title>
  </head>
  <body bgcolor="lightblue">
    <% out.println("有執行, 有看到");%> <% request.setAttribute("name1" ,
    "peter1") ; %> <%--有執行--%> <% out.println("有執行, 有看到");%>

    <jsp:include page="/select_page_Basic.jsp" flush="true">
      <jsp:param name="name0" value="peter0" />
    </jsp:include>

    <% out.println("有執行, 有看到");%> <% request.setAttribute("name2" ,
    "peter2") ; %> <%--有執行 , 但included.jsp未取到 , why?--%> <%
    out.println("有執行, 有看到");%>
  </body>
</html>
```

- 因為 setXXX() 是將值放入憶體位置，且取出也是取出記憶體位置。所以不會因為這樣網頁就 Die

# <a id='s3' class='md-title' href='#top'>3. Java Bean 說明</a>

- POJO
  - 不須序列化 (這點與 java bean 不同)
  - 不能實作介面
  - 不能有父類別
- JAVA Bean 原本是有視窗的介面，拖拉後可以產生相應的數據
  - 現在是包裝資料庫的資料
  - 未來可能是爬蟲

# <a id='s4' class='md-title' href='#top'>4. Java Bean 練習</a>

- 預設資料:
  - 正常的用法，因為此時沒有 hello，所以會 new 一個，並且 print 出 IBM
  - 若 new 過了就不會在執行 IBM 了

```cs
"C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\IBM_HelloBean\hello\hello1.jsp"
```

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>
<%request.setCharacterEncoding("Big5");%>

<jsp:useBean id="hello" scope="session" class="hello.HelloBean">
  <jsp:setProperty name="hello" property="*" />
  <%out.println("IBM");%>
</jsp:useBean>

<html>
  <head>
    <title>Hello</title>
  </head>
  <body>
    <h1>Hello, <jsp:getProperty name="hello" property="name" /></h1>
  </body>
</html>
```

```cs
"C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\IBM_HelloBean\WEB-INF\classes\hello\HelloBean.java"
```

```java
package hello;

public class HelloBean implements java.io.Serializable{
  private String name = "World";

  public String getName() {
    return name;
  }
  public void setName(String name) {
    this.name = name;
  }
}
```

- 測試方法 2

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>
<%request.setCharacterEncoding("Big5");%>

<jsp:useBean id="hello" scope="session" class="hello.HelloBean" />
<jsp:setProperty name="hello" property="name" value="EA102_1" />

<html>
  <head>
    <title>Hello</title>
  </head>
  <body>
    <h1>
      Hello, <jsp:getProperty name="hello" property="name" />
      <br />
      Hello, <%= hello.getName()%>
    </h1>
  </body>
</html>
```

```java
package hello;

public class HelloBean implements java.io.Serializable{
  private String name = "World";

  public String getName() {
    return name;
  }
  public void setName(String name) {
  	System.out.println("name="+name);
    this.name = name;
  }
}
```

- 測試 3

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>
<%request.setCharacterEncoding("Big5");%>

<jsp:useBean id="hello" scope="session" class="hello.HelloBean" />
<jsp:setProperty name="hello" property="name" value="EA102_1" />
<% hello.setName("EA102_2");%>

<html>
  <head>
    <title>Hello</title>
  </head>
  <body>
    <h1>
      Hello, <jsp:getProperty name="hello" property="name" />
      <br />
      Hello, <%= hello.getName()%>
    </h1>
  </body>
</html>
```

```java
package hello;

public class HelloBean implements java.io.Serializable{
  private String name = "World";

  public String getName() {
    return name;
  }
  public void setName(String name) {
  	System.out.println("name="+name);
    this.name = name;
  }
}
```

- 測試 4: 創建 hello2 實體

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>
<%request.setCharacterEncoding("Big5");%>

<jsp:useBean id="hello" scope="session" class="hello.HelloBean" />
<% hello.HelloBean hello2 = new hello.HelloBean(); %>

<jsp:setProperty name="hello" property="name" value="EA102_1" />
<% hello2.setName("EA102_2");%>

<html>
  <head>
    <title>Hello</title>
  </head>
  <body>
    <h1>
      Hello, <jsp:getProperty name="hello" property="name" />
      <br />
      Hello, <%= hello2.getName()%>
    </h1>
  </body>
</html>
```

```java
package hello;

public class HelloBean implements java.io.Serializable{
  private String name = "World";

  public String getName() {
    return name;
  }
  public void setName(String name) {
  	System.out.println("name="+name);
    this.name = name;
  }
}
```

- 測試 5: 包裝資料重複使用
- 包裝資料

```cs
"C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\IBM_HelloBean\hello\hello1.jsp"
```

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>
<%request.setCharacterEncoding("Big5");%>

<jsp:useBean id="hello" scope="session" class="hello.HelloBean" />
<% hello.HelloBean hello2 = new hello.HelloBean(); %>

<jsp:setProperty name="hello" property="name" value="EA102_1" />
<% hello2.setName("EA102_2");%>

<html>
  <head>
    <title>Hello</title>
  </head>
  <body></body>
</html>
```

- 重複使用

```cs
"C:\EA102_WebApp\apache-tomcat-9.0.35\webapps\IBM_HelloBean\hello\hello2.jsp"
```

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>
<%request.setCharacterEncoding("Big5");%>

<jsp:useBean id="hello" scope="session" class="hello.HelloBean" />
<% hello.HelloBean hello2 = new hello.HelloBean(); %>

<html>
  <head>
    <title>Hello</title>
  </head>
  <body>
    <h1>
      Hello, <jsp:getProperty name="hello" property="name" />
      <br />
      Hello, <%= hello2.getName()%>
    </h1>
  </body>
</html>
```

- 測試 6: `property="*"` 多個參數超好用!

```java
package hello;

public class HelloBean implements java.io.Serializable{
  private String name1 = "World1";
	private String name2 = "World2";

  public String getName1() {
    return name1;
  }
  public void setName1(String name1) {
  	System.out.println("name1="+name1);
    this.name1 = name1;
  }

  public String getName2() {
    return name2;
  }
  public void setName2(String name2) {
  	System.out.println("name2="+name2);
    this.name2 = name2;
  }
}
```

```html
<%@ page contentType="text/html; charset=Big5" pageEncoding="Big5"%>
<%request.setCharacterEncoding("Big5");%>

<jsp:useBean id="hello" scope="session" class="hello.HelloBean" />

<jsp:setProperty name="hello" property="*" />

<html>
  <head>
    <title>Hello</title>
  </head>
  <body>
    <h1>
      Hello, <%= hello.getName1()%>
      <br />
      Hello, <%= hello.getName2()%>
    </h1>
  </body>
</html>
```

```html
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=BIG5" />
    <meta name="GENERATOR" content="IBM Software Development Platform" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <link href="theme/Master.css" rel="stylesheet" type="text/css" />
    <title>form.html</title>
  </head>
  <body>
    <form method="GET" action="hello1.jsp">
      請輸入您的名字!<br />
      <input type="TEXT" name="name1" value="peter1吳永志" />
      <p>
        <input type="TEXT" name="name2" value="peter2吳永志" />
        <p>
          <input type="SUBMIT" />
        </p>
      </p>
    </form>
  </body>
</html>
```

---

參考鏈接:

- [什么是 JavaBean、bean? 什么是 POJO、PO、DTO、VO、BO ? 什么是 EJB、EntityBean？](https://www.cnblogs.com/panchanggui/p/11610998.html)
