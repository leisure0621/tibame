<h1 id="top">目錄</h1>

- [1. 課堂投影片](#s1)
- [2. 練習 1](#s2)
- [3. 練習 2](#s3)
- [4. 時間格式化練習](#s4)
- [5. 主要講解案例](#s5)
- [6. 匯入新專案](#s6)
- [7. 放新測試項目至 Tomcat](#s7)
- [8. 使用 SQL 取頁面資料，做分頁](#s8)
- [9. 常用快捷鍵，多行註解](#s9)
- [10. java 的 join 範例](#s10)

---

# <a id='s1' class='md-title' href='#top'>1. 課堂投影片</a>

<p><img src='./image/01.code.png'></p>
<p><img src='./image/02.p01.png'></p>
<p><img src='./image/03.p56.png'></p>
<p><img src='./image/04.p01.png'></p>
<p><img src='./image/05.p117.png'></p>
<p><img src='./image/06.p25.png'></p>
<p><img src='./image/07.p130.png'></p>
<p><img src='./image/08.p172.png'></p>
<p><img src='./image/09.p14.png'></p>
<p><img src='./image/10.p21.png'></p>
<p><img src='./image/11.png'></p>
<p><img src='./image/12.png'></p>
<p><img src='./image/13.code.png'></p>
<p><img src='./image/14.code.png'></p>
<p><img src='./image/15.code.png'></p>
<p><img src='./image/16.png'></p>
<p><img src='./image/17.png'></p>
<p><img src='./image/18.add與update的差異.png'></p>
<p><img src='./image/19.匯入新專案.png'></p>
<p><img src='./image/20.日曆組件.png'></p>
<p><img src='./image/21.code.png'></p>
<p><img src='./image/22.code.png'></p>
<p><img src='./image/23.p57.png'></p>
<p><img src='./image/24.p31.png'></p>
<p><img src='./image/25.p189.png'></p>
<p><img src='./image/26.code.png'></p>
<p><img src='./image/27.增加fmt的庫.code.png'></p>
<p><img src='./image/28.資料庫分析.dio.svg'></p>
<p><img src='./image/29.P196.png'></p>
<p><img src='./image/30.範例程式.png'></p>
<p><img src='./image/31.forEach之varStatus.code.png'></p>
<p><img src='./image/32.code.png'></p>
<p><img src='./image/33.p29.png'></p>
<p><img src='./image/34.code.png'></p>
<p><img src='./image/35.code.png'></p>
<p><img src='./image/36.code.png'></p>
<p><img src='./image/37.code.png'></p>
<p><img src='./image/38.code.png'></p>
<p><img src='./image/39.code.png'></p>
<p><img src='./image/40.分頁器做法2.code.png'></p>
<p><img src='./image/41.p188.c標籤庫需要此頁jar.png'></p>
<p><img src='./image/42.p189.有jar也要有前置符.png'></p>
<p><img src='./image/43.p4.png'></p>
<p><img src='./image/44.code.png'></p>
<p><img src='./image/45.code.png'></p>
<p><img src='./image/46.code.png'></p>
<p><img src='./image/47.p177.png'></p>
<p><img src='./image/48.code.png'></p>

---

- 5 套完整的 EL
- 早上會先看 0201 Service 的
- 用介面當 DAO 的多型

- 先有資料庫表，才有子畫面
- 不會用中性名稱
- 前期有相關問題都交由 service 處理
  - service 是什麼設計模式
    - **faced 模式**
      - faced Pattern
      - faced service pattern
- 使用介面可達到 0 相依的情形
- 程式跟程式間都使用字串傳輸，所以傳時間的話須將字串改成 sql.date 格式，sql.date 有 valueOf 的方法
- 專題開發時可以用 Exception 來除錯
- 超過 25 天的日期，記得轉參數要加 L，但這日期距會越來越短因為距離 1970 年的時間會不同了
- SQL 沒 commit 的東西算髒讀，資料有寫入 但沒更新
- java [永續儲存](https://sites.google.com/site/richchihlee/portal/j2ee/jpa-basic?target=_blank)
- java forward 是基礎，要練熟
- input date 的標籤再 google 、 IE 與 IEdge 顯示都不同，但早期 google 的部分可以修改日期，點日期會出現單獨的選單(ex. 2 月 可以選到 31 天，這種 bug)
- 文章發表時間 timestamp，固定日期 sqlDate

- List
  - **死在 resualt set 量太大** (5000 資料以下)
    - 喘死 JDK 1.0 作法 ， next()
    - 摔死 last()
    - 壓死 getRow
  - SQL Count 最好用

# <a id='s2' class='md-title' href='#top'>2. 練習 1</a>

```cs
"/IBM_emp_0201MVC_Single-Table_css/WebContent/emp/addEmp.jsp"
```

- 兩方法相同

```html
<%= empVO==null%>--${empVO==null}
```

# <a id='s3' class='md-title' href='#top'>3. 練習 2</a>

- **新增跟修改幾乎相同**

- [addEmp.jsp](./doc/java/addEmp.jsp?target=_blank)

```cs
"/IBM_emp_0201MVC_Single-Table_css/WebContent/emp/addEmp.jsp"
```

```cs
<%
  EmpVO empVO = (EmpVO) request.getAttribute("empVO");
%>
<%= empVO==null%>--${empVO==null}<br>--${empVO.deptno}
```

- [addEmp.jsp](./doc/java/update_emp_input.jsp?target=_blank)

```cs
"/IBM_emp_0201MVC_Single-Table_css/WebContent/emp/update_emp_input.jsp"
```

```cs
<%
  EmpVO empVO = (EmpVO) request.getAttribute("empVO");
%>
<%= empVO==null%>--${empVO==null}<br>--${empVO.deptno}
```

- **下面此兩程式與 MVC 1 的也僅差新增與刪除功能而已**

- [addEmp.jsp](./doc/java/select_page.jsp?target=_blank)

```cs
"/IBM_emp_0201MVC_Single-Table_css/WebContent/emp/select_page.jsp"
```

- [listAllEmp.jsp](./doc/java/listAllEmp.jsp?target=_blank)

```cs
"/IBM_emp_0201MVC_Single-Table_css/WebContent/emp/listAllEmp.jsp"
```

- 修改資料時，一開始就有資料，所以拿來用就好。
- 新增時沒資料，所以修改會比新增簡單

# <a id='s4' class='md-title' href='#top'>4. 時間格式化練習</a>

- [listAllEmp2.jsp](./doc/java/listAllEmp2.jsp?target=_blank)

```cs
// 添加 fmt 標籤庫引入
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>

...

<c:forEach var="empVO" items="${list}" begin="<%=pageIndex%>" end="<%=pageIndex+rowsPerPage-1%>">

  <tr>
    <td>${empVO.empno}</td>
    <td>${empVO.ename}</td>
    <td>${empVO.job}</td>
    // 時間格式調整
    <td><fmt:formatDate value="${empVO.hiredate}" pattern="yyyy-MM-dd HH:mm:ss"/></td>
```

# <a id='s5' class='md-title' href='#top'>5. 主要講解案例</a>

```cs
"/IBM_emp_0201MVC_Single-Table_css"
```

# <a id='s6' class='md-title' href='#top'>6. 匯入新專案</a>

- 專案檔案 [DateTimePicker.war](./doc/war/DateTimePicker.war?target=_blank)
- 寫專題時好用，可直接使用此套件改日曆

```cs
"C:\Users\USER\Desktop\SL314_Servlet4課程分享\SL314_課程中分享\22_●emp_MVC_Basic\00_月曆(輸人日期用)(參考使用)"
```

- parse 字串解析成 Date
- format 時間中加上 "yyyy-MM-dd'<u>T</u>'HH:mm:ss.SSSXXX"，是為了分隔符號。
  - 即變成 2001-07-04T12:08:56.235-07:00

```cs
compact1, compact2, compact3
java.text

Class SimpleDateFormat
  java.lang.Object
    java.text.Format
      java.text.DateFormat
        java.text.SimpleDateFormat

All Implemented Interfaces:
Serializable, Cloneable
```

# <a id='s7' class='md-title' href='#top'>7. 放新測試項目至 Tomcat</a>

- 新增新的測試項

```cs
"C:\Users\USER\Desktop\SL314_Servlet4課程分享\SL314_課程中分享\17_※JSTL(webapps)\SL314_JSTL"
```

# <a id='s8' class='md-title' href='#top'>8. 使用 SQL 取頁面資料，做分頁</a>

- rownum 是 oracle 獨有的排序資料，ranking 是自定義別名
- 效能最好，但每家資料庫方式不一樣所以使用會稍微有點困難，故最終還是在 jsp 中寫 分頁功能

```sql
select * from
    (select rownum as ranking, empno from emp2 order by empno )
   where ranking between 1 and 3
```

# <a id='s9' class='md-title' href='#top'>9. 常用快捷鍵，多行註解</a>

```cs
CTRL+SHIFT+C
```

# <a id='s10' class='md-title' href='#top'>10. java 的 join 範例</a>

- 專案檔案 [listAllEmp3.jsp](./doc/java/listAllEmp3.jsp?target=_blank)

```cs
"/IBM_emp_0301MVC_Associations_css/WebContent/emp/listAllEmp.jsp"
```

```cs
${deptSvc.getOneDept(empVO.getDeptno()).dname}
```

- <u>\${deptSvc.getOneDept(empVO.getDeptno())</u> ， 是 DeptVO 的物件
- <u>empVO.getDeptno()</u> ， 該 empVO 的 deptno

---

參考鏈接:

- [JAVA 的服务器重定向：使用 forward()方法转发请求和使用 sendRedirect()方法重定向的区别](https://blog.csdn.net/caixiexin/article/details/6642050)
- [eclipse 自动生成带参数说明方法注释](https://www.cnblogs.com/linfenghp/p/5476403.html)
- [面试官：大数据量 sql 分页查询很慢，有哪些优化方案？](https://blog.csdn.net/weiwosuoai/article/details/100032135)
- [2-1.常用快速鍵](https://sites.google.com/site/javaxuexizhi/eclipse-bian-ji-qi/eclipse-chang-yong-kuai-su-jian)
