# 作業答案

![04-02_01](./image/04-02_01.png)

# 資料庫種類

- Redis 常用

![04-02_02_p52](./image/04-02_02_p52.png)

# 關聯式資料庫

![04-02_03_p53](./image/04-02_03_p53.png)

# 關聯式資料庫特性(!)

## 1. 使用 SQL

- 使用 SQL，可增刪改查

![04-02_04_p54](./image/04-02_04_p54.png)

## 2. 資料完整性

- 給你彈性，後果自己負責

![04-02_05_p55](./image/04-02_05_p55.png)

## 3. 提供交易處理

![04-02_06_p56](./image/04-02_06_p56.png)

## 4. 具 ACID 特性

![04-02_07_p57](./image/04-02_07_p57.png)

### 1. 不可分割性

### 2. 一致性

![04-02_08](./image/04-02_08.png)

### 3. 獨立性

- 將可能會出問題的動作 lock
- 但可能會出現兩隻程式交錯鎖定對方的需求，變成 DeadLock
- 但通常資料庫都會處理這些問題，所以不會造成 Staration (餓死) 的情形

![04-02_16](./image/04-02_16.png)

### 4. 持久性

- `備份`跟`log`

# 關聯式資料庫面臨的挑戰

![04-02_09_p58](./image/04-02_09_p58.png)

## 1. 大數據時代 3V

### 1. 數據量

### 2. 多變性

### 3. 時效性

- 平行處裡，多台電腦運算

## 其他問題

### 1. 阻抗不匹配

![04-02_10_p59](./image/04-02_10_p59.png)

- 硬體阻抗不匹配範例

![04-02_11](./image/04-02_11.png)

- no SQL 會讓程式與資料庫存取更方便

### 2. 叢集需求

![04-02_12_p60](./image/04-02_12_p60.png)

- Scaling up 向上擴充，往上擴充容量(會有極限)

- Scaling out 向外擴充，用多個小的機器取代大的機器(一般的解法)

- 關聯式資料庫用`單一節點`考量，所以無法在 Scaling out 中使用的很好

- 其他解法:
  - Google: BigTable
  - Amazon: Dynamo

# NoSQL

![04-02_13_p61](./image/04-02_13_p61.png)

- `SQL`: 關聯式
- `NoSQL` 不只只有資料庫: `Not Only SQL`

## 1. NoSQL 特性

- 沒有關聯式特性
- 在叢集上運行良好
- Open-Source
- 2000 年後產生
- Schema(綱要)less，沒有綱要(`欄位不用事先宣告`)
- 多種(Polyglot)行駛的資料庫

## 2. NoSQL 總結

- 即一種典範的移轉

# NoSQL CAP 定理

- 沒驗證前稱作`布魯爾猜想`，而後一兩年此猜想就被證實

![04-02_14_p62](./image/04-02_14_p62.png)

## 1. 一致性

## 2. 可用性

- 有限時間內得到答案

## 3. 分隔容忍

- 因為分散儲存，所以不會因為單一節點無法連通(毀損)而無法運作

## 4. 總結

- 關聯式資料庫: C A

- NoSQL: P

  - 所有 NoSQL 都選 P

![04-02_17_p63](./image/04-02_17_p63.png)

![04-02_15_p64](./image/04-02_15_p64.png)

# NoSQL BASE 理論

- 名稱由來: ACID(酸)的相反，(鹼)理論 (NoSQL CAP 別名)

- 定義:

  - 基本可用，`有可能效能很差`

  - 軟狀態，`資料還在讀`

  - 最終一致性，`有可能不一致`

![04-02_18_p65](./image/04-02_18_p65.png)

![04-02_19_p66](./image/04-02_19_p66.png)

# NoSQL 種類

![04-02_20_p67](./image/04-02_20_p67.png)

# 常用資料庫排名

![04-02_21_p68](./image/04-02_21_p68.png)

# 資料庫比較

![04-02_22_p69](./image/04-02_22_p69.png)

# NoSQL 類型資料庫

## 1. 鍵值資料庫(Key-Value Database)

![04-02_23_p70](./image/04-02_23_p70.png)

![04-02_24](./image/04-02_24.png)

## 2. 列導向資料庫

- 欄位(Column)可以動態增加，不用事先宣告
- Row Key、Column Family 需事先宣告

![04-02_25_p71](./image/04-02_25_p71.png)

## 3. 文檔資料庫

- 資料儲存 json 格式，容易產生、處裡

![04-02_26_p72](./image/04-02_26_p72.png)

## 4. 圖形資料庫

- 資料庫結構以圖形呈現

![04-02_27_p73](./image/04-02_27_p73.png)

# 混合持久性資料庫

- 給予儲存方案更多的選擇

![04-02_28_p74](./image/04-02_28_p74.png)

![04-02_29_p75](./image/04-02_29_p75.png)

![04-02_30_p76](./image/04-02_30_p76.png)

![04-02_31_p77](./image/04-02_31_p77.png)

# NoSQL 設計概念

![04-02_32_p78](./image/04-02_32_p78.png)

# NoSQL 資料塑模

![04-02_33_p79](./image/04-02_33_p79.png)

# DDI 原則

- Denormalization

  - 反第一正規化
  - 寫入是針對行，不允許寫入出錯、不允許寫入時其他人編輯...

- Duplication

- Intelligent Keys

![04-02_34_p80](./image/04-02_34_p80.png)

# NoSQL 資料庫設計步驟

- 第一點與第四點跟關聯式資料庫有很大差別
- ER-Model 是為了找出資料的本質

![04-02_35_p81](./image/04-02_35_p81.png)

# MongoDB 設計範例

![04-02_36_p82](./image/04-02_36_p82.png)

![04-02_37_p83](./image/04-02_37_p83.png)

# Redis 資料庫

- 可以將`陣列`存入資料庫當中
- 可以將`集合`存入資料庫當中
- 可以將`結構`存入資料庫當中
- 可以多存幾台資料，以利於資料毀損時的啟用/保護

![04-02_38_p84](./image/04-02_38_p84.png)

# Redis 架構

- 3、4 ， 安全備分 (會影響效能)
- 5 ， 做備份用的

![04-02_39_p86](./image/04-02_39_p86.png)

# Redius 架構之原件

- 虛擬記憶體

![04-02_40_p87](./image/04-02_40_p87.png)

# Redis 資料型別

![04-02_41_p88](./image/04-02_41_p88.png)

![04-02_42_p89](./image/04-02_42_p89.png)

![04-02_43_p90](./image/04-02_43_p90.png)

<p>
  <img src="./image/04-02_44_p91.png">
</p>

<p>
  <img src="./image/04-02_45_p92.png">
</p>

<p>
  <img src="./image/04-02_46_p93.png">
</p>

<p>
  <img src="./image/04-02_47_p94.png">
</p>

# 推薦學習站台

- Include libyary 後 用 api 修改 noSql 資料庫

<p>
  <img src="./image/04-02_48.png">
</p>

# 專題開發步驟

1. 選資料結構
2. 選 Key
3. 內容
