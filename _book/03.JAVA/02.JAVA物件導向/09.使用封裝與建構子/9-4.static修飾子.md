<h1 id="top">目錄</h1>

- [1. static 修飾子(類別變數)](#s1)
- [2. 用類別名稱呼叫類別變數](#s2)
- [3. static 修飾子與存取控制](#s3)
- [4. 能夠使用 static 的情境](#s4)

---

# <a id="s1" class="md-title" href="#top">1. static 修飾子(類別變數)</a>

- [實體變數](#) 由物件各自獨立維護，彼此不受干擾

  - 商品(每支筆)有單獨價格

- [類別變數(static)](#) 屬於類別變數，但可由該類別所創造(new) 出來的物件**共享共用**

  - 商品(每支筆)都統一價格

  - [實體變數宣告 static](#) 稱為**類別變數**或**靜態變數**

  - [方法宣告 static](#) 稱為**類別方法**或**靜態方法**

  - **類別變數**跟**實體變數**都有初始值

  - 類別變數與類別方法會跟著類別存在

    - **當類別第一次被載入 JVM**(.class 檔)時，實體被建構前就已經先載入**靜態**變數與方法(隨著檔案停止運行後消亡)<br><br>

  - **建議**用類別名稱呼叫類別變數

<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">儲存空間</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">類別變數</td>
<td style="text-align:center">global</td>
</tr>
<tr>
<td style="text-align:center">實體變數</td>
<td style="text-align:center">heep</td>
</tr>
<tr>
<td style="text-align:center">方法變數</td>
<td style="text-align:center">stack</td>
</tr>
<tr>
<td style="text-align:center">區塊變數</td>
<td style="text-align:center">stack</td>
</tr>
</tbody>
</table>

<table>
<tr>
<td colspan="2">
程式碼區
</td>
</tr>
<tr>
<td colspan="2">
靜態區: 編譯時期配置 global
</td>
</tr>
<tr>
<td>
<div>動態區<br><br></div>
<table>
<tr>
<td colspan="2">
字串常數池<br>
String constant pool
</td>
</tr>
<tr>
<td>堆疊 stack</td>
<td>堆積 heap</td>
</tr>
</table>
</td>
</tr>
</table>

# <a id="s2" class="md-title" href="#top">2. 用類別名稱呼叫類別變數</a>

- 類別變數的創建與呼叫

  - 物件可以創建後馬上用 static 的，static 的不能馬上使用 static 外的物件 (需使用記憶體的先後順序思考)

    - 太陽是(static)，所有的人(non-static)看到的都是太陽。
      因為太陽(static)已經先出現了，所以所有人(non-static)都能用太陽的資源。
      但因為太陽(static)是先出現的，所以不知道什麼是人(non-static)。<br><br>

```java
public class Count {
  // 產品序號
  private int serialNumber;

  public int getSerialNumber() {
    return serialNumber;
  }

  // 產品數量
  private static int counter;

  public static int getTotalCount() {
    return counter;
  }

  // 建構式
  public Count() {
    counter++;
    serialNumber = 1000 + counter;
  }
}
```

```java
public class TestCount {

  public static void main(String[] args) {
    System.out.println("起始數量:" + Count.getTotalCount() + "\n");

    Count count1 = new Count();
    System.out.println("累計數量:" + Count.getTotalCount());
    System.out.println("序號:" + count1.getSerialNumber() + "\n");

    Count count2 = new Count();
    System.out.println("累計數量:" + Count.getTotalCount());
    System.out.println("序號:" + count2.getSerialNumber() + "\n");
  }

}
```

---

```cs
起始數量:0

累計數量:1
序號:1001

累計數量:2
序號:1002
```

# <a id="s3" class="md-title" href="#top">3. static 修飾子與存取控制</a>

- static 修飾子

```java
package ch09;

public class Count {
  // 產品序號
  private int serialNumber;

  public int getSerialNumber() {
    return serialNumber;
  }

  // 產品數量
  private static int counter;

  public static int getTotalCount() {
    return counter;
  }

  // 建構式
  public Count() {
    counter++;
    serialNumber = 1000 + counter;
  }
}
```

- static 修飾子與區塊

  - static 區塊裡也不能直接使用 non-static 的資料與方法

```java
package ch09;

public class Count2 {
  // 產品序號
  private int serialNumber;

  public int getSerialNumber() {
    return serialNumber;
  }

  // 產品數量
  private static int counter ;

  // static區塊
  static {
    counter = 0;
    System.out.println("起始數量:" + counter + "\n");
  }

  public static int getTotalCount() {
    return counter;
  }

  // 建構式
  public Count2() {
    counter++;
    serialNumber = 1000 + counter;
  }
}
```

# <a id="s4" class="md-title" href="#top">4. 能夠使用 static 的情境</a>

- **方法**中**沒用到物件的資源**就能設定成 static

```java
package ch09;
/*
* 此範例為示範static方法使用
*/
public class TestStaticMethod {

  public static void main(String[] args) {
  System.out.println("請畫三角形!");
      int count = 9;
      drawTriangle(count);
      System.out.println("畫的還不錯!");
  }

  public static void drawTriangle(int count){
    int i, j;
    for ( i = 1; i <= count; i++){
      for ( j = 1; j <= i; j++ )
          System.out.print("*");
      System.out.println();
    }
  }
}
```

---

複習重點

- get set 方法的使用
  - get 回傳值用
  - set 設定值用
- 建構子怎麼分辨/特性上的不同
- static
- this 的使用(物件的代名詞)

註[i]

- JVM，JAVA 工具運行平台

參考鏈接

- [Java 複習筆記 : 變數與記憶體](http://yhhuang1966.blogspot.com/2014/03/java_25.html)
- [24 个 Jvm 面试题总结及答案](https://juejin.im/post/5d22f4e8e51d455a68490bf4)
