- 卸載時會呼叫 destory

<p><img src="./image/05-07_01_p42.png"></p>

<p><img src="./image/05-07_02_p47.png"></p>

- 背景執行續(助手)，不一定要有
- 應用在股票即時回應系統

<p><img src="./image/05-07_03_p54.png"></p>

<p><img src="./image/05-07_04_p10.png"></p>

<p><img src="./image/05-07_05_p55.png"></p>

<p><img src="./image/05-07_06_p59.png"></p>

- GregorianCalendar 適合定某個時間點為起點用

  ((GregorianCalendar) Calendar).isLeapYear(y)

<p><img src="./image/05-07_07_p58.png"></p>

- java8 之前哪 3 對類別分屬哪對
- util.Date，關鍵類別

<p><img src="./image/05-07_08_p31.png"></p>

- 有哪幾個子類別

<p><img src="./image/05-07_09_code.png"></p>

<p><img src="./image/05-07_10_code.png"></p>

- 匿名類別
- (){}

<p><img src="./image/05-07_11_code.png"></p>

<p><img src="./image/05-07_12_code.png"></p>

<p><img src="./image/05-07_13_code.png"></p>

<p><img src="./image/05-07_14_p60.png"></p>

<p><img src="./image/05-07_15_p33.png"></p>

<p><img src="./image/05-07_16_p61.png"></p>

- getServletName() 重要度最低

<p><img src="./image/05-07_17_p62.png"></p>

<p><img src="./image/05-07_18_p63.png"></p>

<p><img src="./image/05-07_25_p16.png"></p>

- 有幾個 web app 就有幾個 servlet context
  - 可看 webapps 下有幾個資料夾

<p><img src="./image/05-07_19_p33.png"></p>

<p><img src="./image/05-07_20_p66.png"></p>

```java
int xx = 10; // xx(值)的10(值)
ServletContext yy = getServletContext(); // yy(址)的值(getServletContext())
```

<p><img src="./image/05-07_21_p61.png"></p>

<p><img src="./image/05-07_22_p25.png"></p>

<p><img src="./image/05-07_23_p76.png"></p>

<p><img src="./image/05-07_24_p67.png"></p>

<p><img src="./image/05-07_26_p64.png"></p>

- `javax.servlet.context.tempdir`
  - 目的:
    1. work 是項目檔案執行後產生的暫時目錄區，即 `JSP 轉成 servlet 程式時存放位置`
    2. servlet 程式 JSP 除錯用(有些時候)
  - 刪除時機:
    1. `系統時間不對`
    2. 系統時間對，但伺服器`一直再跑舊程式`
  - 刪除方法:
    1. 手動進入湯姆貓的目錄刪除 work
    2. 使用 eclipse 刪除 work 中項目

<p><img src="./image/05-07_27_p65.png"></p>

<p><img src="./image/05-07_29_code.png"></p>

<p><img src="./image/05-07_28_code.png"></p>

<p><img src="./image/05-07_30_p10.png"></p>

<p><img src="./image/05-07_31_p153.png"></p>

<p><img src="./image/05-07_32_code.png"></p>

<p><img src="./image/05-07_33.png"></p>

<p><img src="./image/05-07_34.png"></p>

- Eclipse 的 work 路徑

<p><img src="./image/05-07_35.png"></p>

```cs
req.getServerName(): localhost
req.getServerPort(): 8081
context.getServerInfo(): Apache Tomcat/9.0.35
getServerInfo() name: Apache Tomcat
getServerInfo() version: 9.0.35
context.getAttributeNames():
  context.getAttribute("javax.servlet.context.tempdir"): C:\EA102_WebApp\eclipse_WTP_workspace1\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina\localhost\SL314
  context.getAttribute("org.apache.catalina.resources"): org.apache.catalina.webresources.StandardRoot@58d49177
  context.getAttribute("org.apache.catalina.webappVersion"):
  context.getAttribute("org.apache.tomcat.InstanceManager"): org.apache.catalina.core.DefaultInstanceManager@1dd60409
  context.getAttribute("org.apache.catalina.jsp_classpath"): /C:/EA102_WebApp/apache-tomcat-9.0.35/lib/;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/annotations-api.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/catalina-ant.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/catalina-ha.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/catalina-ssi.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/catalina-storeconfig.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/catalina-tribes.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/catalina.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/ecj-4.15.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/el-api.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/jasper-el.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/jasper.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/jaspic-api.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/jsp-api.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/mysql-connector-java-5.1.34-bin.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/ojdbc6.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/servlet-api.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-api.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-coyote.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-dbcp.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-cs.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-de.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-es.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-fr.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-ja.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-ko.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-pt-BR.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-ru.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-i18n-zh-CN.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-jdbc.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-jni.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-util-scan.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-util.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/tomcat-websocket.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/lib/websocket-api.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/bin/bootstrap.jar;/C:/EA102_WebApp/apache-tomcat-9.0.35/bin/tomcat-juli.jar;/C:/jdk1.8.0_201/lib/tools.jar;/C:/jdk1.8.0_201/jre/lib/ext/access-bridge-64.jar;/C:/jdk1.8.0_201/jre/lib/ext/cldrdata.jar;/C:/jdk1.8.0_201/jre/lib/ext/dnsns.jar;/C:/jdk1.8.0_201/jre/lib/ext/jaccess.jar;/C:/jdk1.8.0_201/jre/lib/ext/jfxrt.jar;/C:/jdk1.8.0_201/jre/lib/ext/localedata.jar;/C:/jdk1.8.0_201/jre/lib/ext/nashorn.jar;/C:/jdk1.8.0_201/jre/lib/ext/sunec.jar;/C:/jdk1.8.0_201/jre/lib/ext/sunjce_provider.jar;/C:/jdk1.8.0_201/jre/lib/ext/sunmscapi.jar;/C:/jdk1.8.0_201/jre/lib/ext/sunpkcs11.jar;/C:/jdk1.8.0_201/jre/lib/ext/zipfs.jar
  context.getAttribute("javax.websocket.server.ServerContainer"): org.apache.tomcat.websocket.server.WsServerContainer@281f2976
  context.getAttribute("org.apache.jasper.compiler.TldCache"): org.apache.jasper.compiler.TldCache@2c0138d9
  context.getAttribute("org.apache.tomcat.JarScanner"): org.apache.tomcat.util.scan.StandardJarScanner@50224b07
```

- Eclipse 站存檔存放路徑

```cs
"C:\EA102_WebApp\eclipse_WTP_workspace1\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina"
```

<p><img src="./image/05-07_36_code.png"></p>

```cs
範例路徑: "/SL314/src/ServerSnoop_Tempdir.java"
```

```java
import java.io.*;
import javax.servlet.*;

public class ServerSnoop_Tempdir extends GenericServlet {

	public void service(ServletRequest req, ServletResponse res)
			throws ServletException, IOException {
		res.setContentType("text/plain; charset=Big5");
		PrintWriter out = res.getWriter();

		out.println("我的server container 的暫存目錄區");
		ServletContext context = getServletContext();
		out.println(context.getAttribute("javax.servlet.context.tempdir"));
		out.println(context.getAttribute(ServletContext.TEMPDIR));
	}
}
```

```cs
我的server container 的暫存目錄區
C:\EA102_WebApp\eclipse_WTP_workspace1\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina\localhost\SL314
C:\EA102_WebApp\eclipse_WTP_workspace1\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina\localhost\SL314
```

```cs
範例路徑: "/SL314/src/servlet_examples/HelloWorld.java"
```

```java
package servlet_examples;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloWorld extends HttpServlet {
  int count = 0;
  public void doGet(HttpServletRequest req, HttpServletResponse res)
                               throws ServletException, IOException {

    res.setContentType("text/html; charset=Big5");
    PrintWriter out = res.getWriter();

    out.println("<HTML>");
    out.println("<HEAD><TITLE>Hello World</TITLE></HEAD>");
    out.println("<BODY>");
    out.println("<BIG>Hello World , 世界你好 !</BIG>="+getServletContext().getAttribute(ServletContext.TEMPDIR));
    out.println("</BODY></HTML>");
  }
}
```

```cs
Hello World , 世界你好 !=C:\EA102_WebApp\eclipse_WTP_workspace1\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\work\Catalina\localhost\SL314
```

<p><img src="./image/05-07_37_p66.png"></p>

<p><img src="./image/05-07_38_p83.png"></p>

<p><img src="./image/05-07_39_p117.png"></p>

<p><img src="./image/05-07_40_p115.png"></p>

<p><img src="./image/05-07_30_p10.png"></p>

<p><img src="./image/05-07_41_p54.png"></p>

<p><img src="./image/05-07_42_p157.png"></p>

<p><img src="./image/05-07_43_p273.png"></p>

<p><img src="./image/05-07_44_p182.png"></p>

<p><img src="./image/05-07_45_p175.png"></p>

<p><img src="./image/05-07_46_p2.png"></p>

<p><img src="./image/05-07_47_p84.png"></p>

<p><img src='./image/05-07_48_p116.png'></p>

<p><img src='./image/05-07_50_p119.png'></p>
