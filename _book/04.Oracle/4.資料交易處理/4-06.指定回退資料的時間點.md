<h1 id="top">目錄</h1>

- [1. 交易(transaction)](#s1)
- [2. 查詢是否設定自動 COMMIT](#s2)

---

# <a id="s1" class="md-title" href="#top">1. 交易(transaction)</a>

- 交易 (transaction) 可將多個異動視為一體,通常會搭配

  - ROLLBACK 還原執行過的異動

  - COMMIT 確定交易 (無法還原執行過的異動)

- 使用 SAVEPOINT 可以設定 ROLLBACK 欲回復的時間點

# <a id="s2" class="md-title" href="#top">2. 查詢是否設定自動 COMMIT</a>

- ```sql
  -- 要使用 ROLLBACK ,確定 Preferences > Database > Advanced > Autocommit 沒有勾選，或執行下列指令檢查 AUTOCOMMIT 狀態
  SHOW AUTOCOMMIT ;
  ```

# <a id="s3" class="md-title" href="#top">3. 設定儲存點</a>

- 設定執行時間點 : `SAVEPOINT [pointName]`<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>

  ```sql
  -- SAVEPOINT
  SAVEPOINT point01;
  DELETE FROM PUBLISHER
  WHERE PUBLISHER_ID = 'P00X';

  SAVEPOINT point02;
  DELETE FROM PUBLISHER
  WHERE PUBLISHER_ID = 'P00Y';
  ```

- 回退指定時間點 : `ROLLBACK TO SAVEPOINT [pointName]`

  - 退回 `[pointName]` 沒修改之前的資料

  ```sql
  -- 回復到指定SAVEPOINT
  ROLLBACK TO SAVEPOINT point01;
  ```

---

<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>SAVEPOINT: 日後 ADDC 課程可能會學到 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
