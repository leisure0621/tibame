<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>HW19-37</title>
    <style>
      body {
      }

      td {
        width: 50px;
        height: 50px;
      }
    </style>
  </head>
  <body>
    <form>
      <select id="yy">
        <option value="2015">2015</option>
        <option value="2016">2016</option>
        <option value="2017">2017</option>
        <option value="2018">2018</option>
        <option value="2019">2019</option>
        <option value="2020">2020</option>
      </select>
      <select id="mm">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
      </select>
    </form>
    <table border="1" bordercolor="blue" align="center">
      <tr>
        <td>日</td>
        <td>一</td>
        <td>二</td>
        <td>三</td>
        <td>四</td>
        <td>五</td>
        <td>六</td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </table>

    <script type="text/javascript">
      //選單可以選擇年份跟月份 ---選單可以越滾顯示越多年份
      var yy = document.getElementById('yy');
      var mm = document.getElementById('mm');
      yy.addEventListener('change', change);
      mm.addEventListener('change', change);
      var year = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

      function change() {
        if (yy.value % 100 !== 0 && yy.value % 4 === 0) {
          year[1] = 29;
        } else if (yy.value % 400 === 0) {
          year[1] = 29;
        } else {
          year[1] = 28;
        }
        var now = new Date();
        now.setFullYear(yy.value);
        now.setMonth(mm.value - 1);
        now.setDate(1);
        var day = now.getDay();

        var b = document.getElementsByTagName('td');
        for (var j = 7; j < b.length; j++) {
          b[j].innerText = '';
        }
        for (var i = 7 + day; i < year[mm.value - 1] + 7 + day; i++) {
          b[i].innerHTML = '<div>' + (i - (6 + day)) + '</div>';
        }

        var c = document.getElementsByTagName('tr')[6].querySelector('td')
          .innerText;
        console.log(!!document.getElementsByTagName('tr')[6].innerText);
        if (!c) {
          document.getElementsByTagName('tr')[6].style.display = 'none';
        } else {
          document.getElementsByTagName('tr')[6].style.display = 'table-row';
        }
      }
    </script>
  </body>
</html>
